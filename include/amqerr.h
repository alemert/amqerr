/******************************************************************************/
/*                        */
/*   A M Q E R R   T O   Q U E U E                                            */
/*                              */
/******************************************************************************/

/******************************************************************************/
/*   I N C L U D E S                                                          */
/******************************************************************************/

// ---------------------------------------------------------
// system
// ---------------------------------------------------------
#include <time.h>

// ---------------------------------------------------------
// own 
// ---------------------------------------------------------

/******************************************************************************/
/*   D E F I N E S                                                            */
/******************************************************************************/
#ifdef C_MODULE_AMQERR
const char progname[] = "amqerr" ;
#else
extern const char progname[] ;
#endif

#define ITEM_LENGTH   PATH_MAX 
#define AMQERR        "AMQERR"
#define AMQ_FILE_NAME AMQERR"??.LOG"
#define AMQ_MAX_ID    99
#define CMPERR        "CMPERR03.LOG"

#define AMQ_STATE_Q "ADMIN.AMQERR.STATE.QUEUE"
#define AMQ_STORE_Q "ADMIN.AMQERR.STORE.QUEUE"

/******************************************************************************/
/*   T Y P E S                                                                */
/******************************************************************************/
typedef struct sAmqerr tAmqerr ;

/******************************************************************************/
/*   S T R U C T S                                                            */
/******************************************************************************/
struct sAmqerr
{
  char name[PATH_MAX+1]; // length of AMQ_FILE_NAME + 1
  time_t mtime ;         // modification time of the amqerr file
  off_t length;          // lenght of the amqerr file
};

/******************************************************************************/
/*   G L O B A L E S                                                          */
/******************************************************************************/

/******************************************************************************/
/*   M A C R O S                                                              */
/******************************************************************************/

/******************************************************************************/
/*   P R O T O T Y P E S                                                      */
/******************************************************************************/

// ---------------------------------------------------------
// amqerr.c
// ---------------------------------------------------------
int amqerr();

// ---------------------------------------------------------
// rotate.c
// ---------------------------------------------------------
int lsAmqerr( const char* _path, tAmqerr* _arr, int _lng);
int rotateAmqerr( tAmqerr *_arr );
int copy( const char* _src, const char* _dst );


